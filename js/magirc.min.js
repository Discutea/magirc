function openChanMenu(t){return menu.data("channel",$(t).parent().parent().attr("id")),menu.is(":visible")?(menu.hide(),!1):(menu.show(),menu.position({my:"right top",at:"right bottom",of:t}),$(document).one("click",function(){menu.hide()}),!1)}function getUserStatus(t){return t.away?'<img src="theme/'+theme+'/img/status/user-away.png" alt="away" title="'+mLang.AwayAs+" "+t.nickname+'" />':t.online?'<img src="theme/'+theme+'/img/status/user-online.png" alt="online" title="'+mLang.OnlineAs+" "+t.nickname+'" />':'<img src="theme/'+theme+'/img/status/user-offline.png" alt="offline" title="'+mLang.Offline+'" />'}function getUserExtra(t){var e="";return t.bot&&(e+=' <img src="theme/'+theme+'/img/status/bot.png" alt="bot" title="'+mLang.Bot+'" />'),t.service&&(e+=' <img src="theme/'+theme+'/img/status/service.png" alt="service" title="'+mLang.Service+'" />'),t.operator&&(e+=' <img src="theme/'+theme+'/img/status/operator.png" alt="oper" title="'+t.operator_level+'" />'),t.helper&&(e+=' <img src="theme/'+theme+'/img/status/help.png" alt="help" title="'+mLang.Helper+'" />'),e}function getCountryFlag(t){if(null!=t.country_code&&""!=t.country_code&&"??"!=t.country_code&&"local"!=t.country_code){var e=t.city?t.city+", "+t.region+", "+t.country:t.country;return'<img src="theme/'+theme+"/img/flags/"+t.country_code.toLowerCase()+'.png" alt="'+t.country_code+'" title="'+e+'" />'}return'<img src="theme/'+theme+'/img/flags/unknown.png" alt="Unknown" title="'+mLang.Unknown+'" />'}function getChannelLinks(){return net_roundrobin||service_webchat?'<button type="button" title="'+mLang.Join+'..." class="chanbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icons" style="height:18px; width:30px; margin:0; vertical-align:middle;"><span class="ui-button-icon-secondary ui-icon ui-icon-triangle-1-s"></span></button>':""}function getTimeElapsed(t){var e=Math.floor(t/86400),n=Math.floor((t-86400*e)/3600),a=Math.floor((t-86400*e-3600*n)/60);return e+" "+mLang.Days+" "+n+" "+mLang.Hours+" "+a+" "+mLang.Minutes}var menu;$(document).ready(function(){function t(t,e){var n=t.split(" "),a=n[1].split(":");return n=n[0].split(e),1*(n[2]+n[1]+n[0]+a[0]+a[1]+a[2])}$("#loading").ajaxStart(function(){$(this).show()}).ajaxStop(function(){$(this).hide()}),$("#locale").change(function(){$.cookie("magirc_locale",$("#locale").val(),{expires:30,path:"/"}),window.location.reload()}),$.format.date.defaultShortDateFormat="dd/MM/yyyy",$.format.date.defaultLongDateFormat="dd/MM/yyyy hh:mm:ss",$(".shortDateFormat").each(function(t,e){$(e).is(":input")?$(e).val($.format.date($(e).val(),$.format.date.defaultShortDateFormat)):$(e).text($.format.date($(e).text(),$.format.date.defaultShortDateFormat))}),$(".longDateFormat").each(function(t,e){$(e).is(":input")?$(e).val($.format.date($(e).val(),$.format.date.defaultLongDateFormat)):$(e).text($.format.date($(e).text(),$.format.date.defaultLongDateFormat))}),$.extend($.fn.dataTable.defaults,{processing:!1,serverSide:!1,jQueryUI:!0,autoWidth:!1,pagingType:"full_numbers",language:mLang.DataTables}),$.fn.dataTableExt.aTypes.unshift(function(t){if(null!==t&&"string"==typeof t){if(t.match(/^(0[1-9]|[12][0-9]|3[01])\.(0[1-9]|1[012])\.(19|20|21)\d\d ([01][0-9]|2[0-4])\:([0-5][0-9])\:([0-5][0-9])$/))return"date-euro";if(t.match(/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[012])\/(19|20|21)\d\d ([01][0-9]|2[0-4])\:([0-5][0-9])\:([0-5][0-9])$/))return"date-uk"}return null}),$.fn.dataTableExt.oSort["date-euro-asc"]=function(e,n){var a=t(e,"."),o=t(n,".");return o>a?-1:a>o?1:0},$.fn.dataTableExt.oSort["date-euro-desc"]=function(e,n){var a=t(e,"."),o=t(n,".");return o>a?1:a>o?-1:0},$.fn.dataTableExt.oSort["date-uk-asc"]=function(e,n){var a=t(e,"/"),o=t(n,"/");return o>a?-1:a>o?1:0},$.fn.dataTableExt.oSort["date-uk-desc"]=function(e,n){var a=t(e,"/"),o=t(n,"/");return o>a?1:a>o?-1:0},Highcharts.setOptions({global:{useUTC:!1},chart:{backgroundColor:"transparent",type:"spline",marginRight:10,style:{fontFamily:"Share, cursive"},plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:null},xAxis:{type:"datetime",tickPixelInterval:150,ordinal:!0},yAxis:{title:{align:"low"},allowDecimals:!1,plotLines:[{value:0,width:1,color:"#808080"}]},rangeSelector:{buttons:[{type:"day",count:1,text:mLang.zoom_1d},{type:"week",count:1,text:mLang.zoom_1w},{type:"month",count:1,text:mLang.zoom_1m},{type:"month",count:3,text:mLang.zoom_3m},{type:"month",count:6,text:mLang.zoom_6m},{type:"year",count:1,text:mLang.zoom_1y},{type:"all",text:mLang.zoom_All}],selected:3},tooltip:{valueDecimals:0,yDecimals:0,xDateFormat:format_datetime_charts},legend:{enabled:!1},exporting:{enabled:!1},navigation:{buttonOptions:{}},plotOptions:{spline:{lineWidth:2,states:{hover:{lineWidth:3}},marker:{enabled:!1,states:{hover:{enabled:!0,symbol:"circle",radius:5,lineWidth:1}}}},pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+Math.round(100*this.percentage)/100+" %"}}},column:{dataLabels:{enabled:!0,rotation:-90,x:3,y:-12}}},rangeSelector:{selected:4},credits:{enabled:!1}}),menu=$("#chanmenu").menu({select:function(t,e){$(this).hide();var n=encodeURIComponent(menu.data("channel"));switch(e.item.data("action")){case"irc":location.href="irc://"+net_roundrobin+":"+net_port+"/"+n.replace("%23","");break;case"ircs":location.href="irc://"+net_roundrobin+":+"+net_port_ssl+"/"+n.replace("%23","");break;case"webchat":location.href=service_webchat+n;break;case"mibbit":location.href="http://widget.mibbit.com/?settings="+service_mibbit+"&server="+net_roundrobin+"&channel="+n+"&promptPass=true"}}}).hide().css({position:"absolute",zIndex:1}),$(document).on("mouseenter",".chanbutton",function(){$(this).removeClass("ui-state-default").addClass("ui-state-focus")}),$(document).on("mouseleave",".chanbutton",function(){$(this).removeClass("ui-state-focus").addClass("ui-state-default")})});